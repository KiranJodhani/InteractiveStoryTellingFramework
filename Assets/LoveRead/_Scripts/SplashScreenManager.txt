using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.UI;
using TMPro;
using Michsky.UI.FSC;
using UnityEngine.SceneManagement;
public class SplashScreenManager : MonoBehaviour
{

    public TextMeshProUGUI PhraseText;
    public string[] Phrases;
    int PhraseIndex = -1;
    public Image LoadingBarSlider;
    public float LoadingSpeed;
    public TextMeshProUGUI LoadingProgressText;
    string NextSceneName = "1_MainMenuScene";
    void Start()
    {
        SwitchPhrase();
    }


    void SwitchPhrase()
    {
        PhraseIndex = PhraseIndex + 1;
        if(PhraseIndex> Phrases.Length-1)
        {
            PhraseIndex = 0;
        }
        PhraseText.text = Phrases[PhraseIndex];
        Invoke("SwitchPhrase", 3);
    }

    bool CanGoToNextScene = false;

    private void Update()
    {
        LoadingBarSlider.fillAmount = LoadingBarSlider.fillAmount + (LoadingSpeed * Time.deltaTime);
        LoadingProgressText.text = "Loading:" + LoadingBarSlider.fillAmount.ToString("P0");
        if(!CanGoToNextScene && LoadingBarSlider.fillAmount.ToString("P0")=="100%")
        {
            CanGoToNextScene = true;
            PlayScreenTransitionAnimation();
        }
    }

    public GameObject ScreenTransitionAnimation;
    private string panelFadeIn = "Panel Open";

    public void PlayScreenTransitionAnimation()
    {
        ScreenTransitionAnimation.SetActive(true);
        ScreenTransitionAnimation.GetComponent<Animator>().Play("");
        ScreenTransitionAnimation.GetComponent<Animator>().Play(panelFadeIn);
        Invoke("LoadNextScene", 1f);
    }

    void LoadNextScene()
    {
        SceneManager.LoadScene(NextSceneName);
    }


}